{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    {% block head %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}GeoMaster - Тест по столицам стран{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="{% static 'css/tests_style.css' %}" rel="stylesheet">
    {% endblock %}
</head>
<body>
    {% block header %}
    <header class="bg-primary text-white py-5 shadow">
        <div class="container text-center">
            <h1 class="display-4 fw-bold">GeoMaster</h1>
            <p class="lead fs-4 opacity-90">Проверяйте свои знания</p>
        </div>
    </header>
    {% endblock %}

    {% block nav %}
    <nav class="bg-light py-3 shadow-sm">
        <div class="container">
            <a href="/" class="btn btn-outline-primary">На главную</a>
        </div>
    </nav>
    {% endblock %}
    
    {% block main %}
    <main class="py-5">
        <div class="container">
            {% block intro %}
            <section class="intro bg-white p-4 p-md-5 rounded shadow-sm text-center mb-5">
                <h2 class="text-primary mb-3">Тест по столицам стран мира</h2>
                <p class="lead">Проверьте свои знания мировых столиц. Введите ответ для каждой страны и узнайте, насколько хорошо вы знаете географию!</p>
            </section>
            {% endblock %}
            
            {% block content %}
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="continent-selector bg-white p-4 rounded shadow-sm mb-4">
                        <h3 class="text-primary mb-3">Выберите континент</h3>
                        <select id="continent-select" class="form-select">
                            <option value="Europe">Европа</option>
                            <option value="Asia">Азия</option>
                            <option value="Africa">Африка</option>
                            <option value="North America">Северная Америка</option>
                            <option value="South America">Южная Америка</option>
                            <option value="Oceania">Океания</option>
                        </select>
                    </div>
                    
                    <div class="card-counter">
                        Вопрос <span id="current-card">1</span> из <span id="total-cards">0</span>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress" style="height: 10px;">
                            <div id="progress-bar" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="test-container">
                        <div id="test-card" class="test-card">
                            <div class="question">
                                <span id="country-name">Страна</span>
                            </div>
                            <div class="answer-input">
                                <input type="text" id="answer-input" class="form-control" placeholder="Введите название столицы">
                            </div>
                            <button id="submit-btn" class="btn btn-primary">Проверить ответ</button>
                            <div id="correct-answer" class="correct-answer">
                                <i class="bi bi-check-circle-fill"></i> Верно!
                            </div>
                            <div id="incorrect-answer" class="incorrect-answer">
                                <i class="bi bi-x-circle-fill"></i> Правильный ответ: <span id="correct-answer-text"></span>
                            </div>
                        </div>
                        
                        <div class="navigation-buttons">
                            <button id="prev-btn" class="btn btn-outline-primary" disabled>
                                <i class="bi bi-arrow-left"></i> Назад
                            </button>
                            <button id="next-btn" class="btn btn-outline-primary" disabled>
                                Вперед <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                        
                        <div id="result-container" class="result-container">
                            <h3 class="text-primary mb-4">Результаты теста</h3>
                            <div class="result-score mb-4">
                                <h1> <span id="score">0</span> из <span id="total-questions">0</span></h1>
                            </div>
                            <p id="result-message" class="lead mb-4"></p>
                            <button id="restart-btn" class="btn btn-primary">Пройти тест снова</button>
                        </div>
                    </div>
                </div>
            </div>
            {% endblock %}
        </div>
    </main>
    {% endblock %}
    
    {% block footer %}
    <footer class="bg-dark text-white py-5 mt-4">
        <div class="container text-center">
            <p class="mb-1">&copy; 2025 GeoMaster</p>
            <p class="small opacity-80">Образовательный инструмент для любителей географии</p>
        </div>
    </footer>
    {% endblock %}

    {% block scripts %}
    <script>
    const allCountries = JSON.parse('{{ countries|escapejs }}');
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/tests_script.js' %}"></script>
    {% endblock %}
</body>
</html>